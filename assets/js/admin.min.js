(()=>{document.addEventListener("DOMContentLoaded",()=>{let a=document.getElementById("lisa-fetch-indices"),t=document.getElementById("lisa-fetch-index-settings"),i=document.getElementById("lisa-indices-list"),d=n=>{let s=document.createElement("p");return s.textContent=n,s};if(t){let n=document.getElementById("lisa_algolia_pagination_hits_per_page"),s=document.getElementById("lisa_algolia_pagination_pagination_limited_to");t.addEventListener("click",async()=>{t.disabled=!0,t.textContent=lisa.fetch_status_label;let e=new FormData;e.append("action","lisa_fetch_algolia_index_settings"),e.append("nonce",lisa.lisa_fetch_algolia_index_settings_nonce),e.append("index_name",t.dataset.indexName);try{let o=await(await fetch(lisa.ajax_url,{method:"POST",credentials:"same-origin",body:e})).json();if(console.log(o),!o.success)throw new Error;n.value=o.data.hitsPerPage,s.value=o.data.paginationLimitedTo}catch(l){console.log(l)}finally{t.disabled=!1,t.textContent=lisa.fetch_index_settings_button_label}})}a&&a.addEventListener("click",async()=>{a.disabled=!0,a.textContent=lisa.fetch_status_label;let n=new FormData;n.append("action","lisa_fetch_algolia_indices"),n.append("nonce",lisa.lisa_fetch_algolia_indices_nonce);try{let e=await(await fetch(lisa.ajax_url,{method:"POST",credentials:"same-origin",body:n})).json();if(!e.success)throw new Error;if(e.data.length===0)i.innerHTML="",i.appendChild(d(lisa.no_indices_label));else{i.innerHTML="";let l=e.data.length===1?lisa.found_one_index:lisa.found_many_indices.replace("%d",e.data.length);i.appendChild(d(l))}}catch{i.innerHTML="",i.appendChild(d(lisa.fetch_error_label))}finally{a.disabled=!1,a.textContent=lisa.fetch_indices_button_label}})});})();
