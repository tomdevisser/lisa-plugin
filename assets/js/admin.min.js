(()=>{document.addEventListener("DOMContentLoaded",()=>{let e=document.getElementById("lisa-fetch-indices"),n=document.getElementById("lisa-indices-list"),s=t=>{let a=document.createElement("p");return a.textContent=t,a};e&&e.addEventListener("click",async()=>{e.disabled=!0,e.textContent=lisa.fetch_status_label;let t=new FormData;t.append("action","lisa_fetch_algolia_indices"),t.append("nonce",lisa.lisa_fetch_algolia_indices_nonce);try{let i=await(await fetch(lisa.ajax_url,{method:"POST",credentials:"same-origin",body:t})).json();if(!i.success)throw new Error;if(i.data.length===0)n.innerHTML="",n.appendChild(s(lisa.no_indices_label));else{n.innerHTML="";let l=i.data.length===1?lisa.found_one_index:lisa.found_many_indices.replace("%d",i.data.length);n.appendChild(s(l))}}catch{n.innerHTML="",n.appendChild(s(lisa.fetch_error_label))}finally{e.disabled=!1,e.textContent=lisa.fetch_button_label}})});})();
