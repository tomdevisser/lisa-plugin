(()=>{document.addEventListener("DOMContentLoaded",()=>{let t=document.getElementById("lisa-fetch-indices"),e=document.getElementById("lisa-fetch-index-settings");if(e){let a=document.getElementById("lisa_algolia_pagination_hits_per_page"),i=document.getElementById("lisa_algolia_pagination_pagination_limited_to");e.addEventListener("click",async()=>{e.disabled=!0,e.textContent=lisa.fetch_status_label;let n=new FormData;n.append("action","lisa_fetch_algolia_index_settings"),n.append("nonce",lisa.lisa_fetch_algolia_index_settings_nonce),n.append("index_name",e.dataset.indexName);try{let s=await(await fetch(lisa.ajax_url,{method:"POST",credentials:"same-origin",body:n})).json();if(!s.success)throw new Error;a.value=s.data.hitsPerPage,i.value=s.data.paginationLimitedTo}catch(o){console.log(o)}finally{e.disabled=!1,e.textContent=lisa.fetch_index_settings_button_label}})}t&&t.addEventListener("click",async()=>{t.disabled=!0,t.textContent=lisa.fetch_status_label;let a=new FormData;a.append("action","lisa_fetch_algolia_indices"),a.append("nonce",lisa.lisa_fetch_algolia_indices_nonce);try{if(!(await(await fetch(lisa.ajax_url,{method:"POST",credentials:"same-origin",body:a})).json()).success)throw new Error;location.reload()}catch(i){console.log(i)}finally{t.disabled=!1,t.textContent=lisa.fetch_indices_button_label}})});})();
